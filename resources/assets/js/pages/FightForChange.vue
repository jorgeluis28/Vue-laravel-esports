<template>
    <div class="vue-app-container">
        <section class="classes-image" style="padding: 0px;padding-top: 50px; padding-bottom: 50px;">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-12" style="padding: 0">
                        <div class="fight-bg-image"></div>
                    </div>
                </div>
            </div>
        </section>

        <section class="classes-kind" style="padding-top: 1px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12" style="text-align: center;">
                        <div style="color: white; background-color: black;">
                            <h2 style="padding-top: 10px;padding-bottom: 10px;margin-top: 0px;margin-bottom: 0px;color: white">Trailer</h2>
                            <p style="font-weight: bold;">Live Streaming</p>
                            <div style="height: 0px;  padding-bottom: 56.7%;">
                                <iframe frameborder="0" style="width: calc(100% - 30px);height: 100%;position: absolute;left: 15px;" allow="autoplay; encrypted-media" allowfullscreen="" data-src="https://www.youtube.com/embed/KxKr2hCnwwo" class="lazyloaded" src="https://www.youtube.com/embed/KxKr2hCnwwo"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="class-details">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 section_info" style="text-align: center;">
                        <h4>Fight For Change is powered by Gaming Industry Leaders that wants to send a positive message to our community. </h4>
                        <h4>The first game in this series is Mortal Kombat 11.  Test your might in this single elimination Do or Die tournament!</h4>
<!--                        <h4>Get ready to represent your NFL FLAG league and prove who's the best on the digital turf!<br><br>Metro Esports can help you shine on the digital playing field.</h4>-->
                        <div class="flag_elem">
                            <h4>Riseüôå</h4>
                            <h4>GrindüéÆ</h4>
                            <h4>ShineüèÜ</h4>
                        </div>
                        <h4 style="margin-top: 50px;">Powered By:</h4>
                        <img width="470" height="116" alt="" data-srcset="https://metrotech.gg/assets/images/bg-banner/logitech.png 470w, https://metrotech.gg/assets/images/bg-banner/logitech-300x74.png 300w, https://metrotech.gg/assets/images/bg-banner/logitech-20x5.png 20w" data-src="https://metrotech.gg/assets/images/bg-banner/logitech.png" data-sizes="(max-width: 470px) 100vw, 470px" class="attachment-large size-large lazyloaded" src="https://metrotech.gg/assets/images/bg-banner/logitech.png" sizes="(max-width: 470px) 100vw, 470px" srcset="https://metrotech.gg/assets/images/bg-banner/logitech.png 470w, https://metrotech.gg/assets/images/bg-banner/logitech-300x74.png 300w, https://metrotech.gg/assets/images/bg-banner/logitech-20x5.png 20w">
                    </div>
                </div>
            </div>
        </section>

        <section class="class-details" style="margin-bottom: 0px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 section_prize">
                        <div class="section_content">
                            <h1 class="elementor-heading-title elementor-size-default">Prize Structure</h1>
                            <div class="rank">
                                <h2 class="elementor-heading-title elementor-size-default">ü•áFirst Place</h2>
                                <h3 class="elementor-heading-title elementor-size-default white-text">‚Ä¢  $1,500 cash, $1,500 scholarship, 1500 DB Prize Tokens, X- In-game currency</h3>
<!--                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">‚Ä¢ 3x Metro Pro Esports Coaching Sessions!</a></h3>-->
                            </div>
                            <div class="rank">
                                <h2 class="elementor-heading-title elementor-size-default">ü•àSecond Place</h2>
                                <h3 class="elementor-heading-title elementor-size-default white-text">‚Ä¢ $750 cash ,  $750 scholarship, 750 DB Prize Tokens, X - In-game currency</h3>
<!--                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">‚Ä¢ 2x Metro Pro Esports Coaching Sessions!</a></h3>-->
                            </div>
                            <div class="rank">
                                <h2 class="elementor-heading-title elementor-size-default">ü•âThird Place</h2>
                                <h3 class="elementor-heading-title elementor-size-default white-text">‚Ä¢ $250 cash,  $250 scholarship, 250 DB Prize Tokens,  X  In-game currency</h3>
<!--                                <h3 class="elementor-heading-title elementor-size-default"><a href="/coaching">‚Ä¢ Metro Pro Esports Coaching Session!</a></h3>-->
                            </div>
<!--                            <h6 class="elementor-heading-title elementor-size-default" style="color: white;">All registered participants will receive a free 25 digital NFL Trade cards from Panini.</h6>-->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="class-details" style="margin-top: 0px;">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 section_schedule">
                        <div class="section_schedule_content">
                            <h1 class="elementor-heading-title elementor-size-default"> TBD coming soon for schedule </h1>
                            <div class="rank">
                                <h3 class="elementor-heading-title elementor-size-default">Sunday July 26th</h3>
                                <h3 class="elementor-heading-title elementor-size-default" style="font-weight: lighter;">Tournament Starts : 12PM EST</h3>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="class-details">
            <div class="container">
                <div class="row" style="flex: 1; display: flex; flex-direction: row; justify-content: center; margin-top: 30px; margin-bottom: 30px;flex-wrap: wrap">
                    <div class="col-md-3 col-sm-6" style="margin-left: 10px;margin-right: 10px;">
                        <div class="store-list-item">
                            <div>
                                <div class="team-container">
                                    <p class="custom-content">Join the Tournament</p>
                                    <img src="/assets/images/bg-banner/tournament_1.jpg"
                                         class="team-image">
                                </div>
                                <div class="info">
                                    <span class="name">Mortal Kombat 11</span>
                                    <div class="btn-wrap">
                                        <a class="btn btn-block small" href="https://doctorbattles.com/tour/page/main_page/33/28" target="_blank">REGISTER</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 section_info" style="text-align: center;">
                        <h1>Media</h1>
                        <h4>For real-time event results/updates, and to participate in the @NFLFlagMadden social media contest, follow Metro Esports on:</h4>
                        <div class="button_list">
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-twitch elementor-repeater-item-d0e13c4"
                               href="https://www.twitch.tv/metroesportslive" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-twitch"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-youtube elementor-repeater-item-d89a043"
                               href="https://www.youtube.com/channel/UC78Zr2pU8nP7_MHvZg5LynQ" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-youtube"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-instagram elementor-repeater-item-7f32ac9"
                               href="https://www.instagram.com/metroesportsus/" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-instagram"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-facebook elementor-repeater-item-474e788"
                               href="https://www.facebook.com/MetroEsportsUS" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-facebook"></i> </a>
                            <a class="elementor-icon elementor-social-icon elementor-social-icon-twitter elementor-repeater-item-84e5d10"
                               href="https://twitter.com/MetroEsportsUS" target="_blank">
                                <span class="elementor-screen-only"></span>
                                <i class="fa fa-twitter"></i> </a>
                        </div>
                        <h1>Rules</h1>
                        <iframe style="width: 100%; height: 400px;" data-src="https://drive.google.com/file/d/134QmchYOgzm8FZmGT02P_dcRfsnMshBt_2UTKWLslno/preview" class=" lazyloaded" src="https://drive.google.com/file/d/134QmchYOgzm8FZmGT02P_dcRfsnMshBt_2UTKWLslno/preview"></iframe>
                    </div>
                </div>
            </div>
        </section>
        <section class="class-details">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 siginup_section" id="signup_section">
                        <h2 class="elementor-heading-title elementor-size-default">Our Partners</h2>
                        <div class="elementor-row">
                            <div class="elementor-element elementor-element-5d45f50 elementor-column elementor-col-33 elementor-inner-column"
                                 data-id="5d45f50" data-element_type="column">
                                <div class="elementor-column-wrap  elementor-element-populated">
                                    <div class="elementor-widget-wrap">
                                        <div class="elementor-element elementor-element-f085db2 elementor-widget elementor-widget-image"
                                             data-id="f085db2" data-element_type="widget" data-widget_type="image.default">
                                            <div class="elementor-widget-container">
                                                <div class="elementor-image">
                                                    <img width="200" height="50" alt=""
                                                         data-srcset="/assets/images/bg-banner/logitech.png 470w, /assets/images/bg-banner/logitech-300x74.png 300w, /assets/images/bg-banner/logitech-20x5.png 20w"
                                                         data-src="https://metrotech.gg/assets/images/bg-banner/logitech.png"
                                                         class="attachment-large size-large ls-is-cached lazyloaded"
                                                         src="/assets/images/bg-banner/logitech.png"
                                                         sizes="(max-width: 470px) 100vw, 200px"
                                                         srcset="/assets/images/bg-banner/logitech.png 470w, /assets/images/bg-banner/logitech-300x74.png 300w, /assets/images/bg-banner/logitech-20x5.png 20w">
                                                    <img width="200" height="130" alt=""
                                                         class="attachment-large size-large lazyload"
                                                         src="/assets/images/bg-banner/microsofts-logo-gets-a-makeover.jpg"/>
                                                    <img width="200" height="100"
                                                         src="/assets/images/bg-banner/SAP_logo-1-1024x521.png"
                                                         class="attachment-large size-large" alt=""
                                                         sizes="(max-width: 470px) 100vw, 200px"/>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center;">
                            <h6 class="elementor-heading-title elementor-size-default">Registration extended to June 22nd!</h6>
                            <h6 class="elementor-heading-title elementor-size-default"><a
                                href="https://drive.google.com/file/d/1kC7zQcPJOzaVe7eq0LmLIZ6yRJrcOrG7/view">Metro Esports Privacy
                                Policy</a></h6>
                            <h6 class="elementor-heading-title elementor-size-default">Note: This tournament is an independant endeavor by NFL FLAG
                                and is not an officially sanctioned EA Sports event.</h6>
                            <h6 class="elementor-heading-title elementor-size-default"><a href="mailto:events@nflflag2020.com">Contact us at
                                events@nflflag2020.com</a></h6>
                            <a href="https://nflflag.com/find-league">
                                <img width="1024" height="132" alt=""
                                     data-srcset="https://metrotech.gg/assets/images/bg-banner/findaleauge-1024x132.jpg 1024w, https://metrotech.gg/assets/images/bg-banner/findaleauge-300x39.jpg 300w, https://metrotech.gg/assets/images/bg-banner/findaleauge-768x99.jpg 768w, https://metrotech.gg/assets/images/bg-banner/findaleauge-20x3.jpg 20w, https://metrotech.gg/assets/images/bg-banner/findaleauge.jpg 1366w"
                                     data-src="https://metrotech.gg/assets/images/bg-banner/findaleauge-1024x132.jpg"
                                     data-sizes="(max-width: 1024px) 100vw, 1024px" class="attachment-large size-large lazyloaded"
                                     src="/assets/images/bg-banner/findaleauge-1024x132.jpg"
                                     sizes="(max-width: 1024px) 100vw, 1024px"
                                     srcset="/assets/images/bg-banner/findaleauge-1024x132.jpg 1024w, /assets/images/bg-banner/findaleauge-300x39.jpg 300w, /assets/images/bg-banner/findaleauge-768x99.jpg 768w, /assets/images/bg-banner/findaleauge-20x3.jpg 20w, /assets/images/bg-banner/findaleauge.jpg 1366w">
                                <noscript><img width="1024" height="132"
                                               src="/assets/images/bg-banner/findaleauge-1024x132.jpg"
                                               class="attachment-large size-large" alt=""
                                               srcset="/assets/images/bg-banner/findaleauge-1024x132.jpg 1024w, https://metrotech.gg/assets/images/bg-banner/findaleauge-300x39.jpg 300w, https://metrotech.gg/assets/images/bg-banner/findaleauge-768x99.jpg 768w, https://metrotech.gg/assets/images/bg-banner/findaleauge-20x3.jpg 20w, https://metrotech.gg/assets/images/bg-banner/findaleauge.jpg 1366w"
                                               sizes="(max-width: 1024px) 100vw, 1024px"/></noscript>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="class-details">
            <div class="container" style="background-color:#02003D">
                <h4 style="color: white;"> PROFESSIONAL AND CLUB TEAMS - Club Teams & Tournaments </h4>
                <h6 style="color: white;"> On a Metro Squad club team, you'll make friends and get ready for a lifelong enjoyment of exports with 
                a powerful blend of education, training, and competition. We have teams for gamers 6 to 18 years old.
                Professional coaching help build the technical and communication skills necessary to excel-all while instilling our team's 
                core values of balance, positivity, respect, and teamwork. </h6>
                <button class="professional_btn"> Coming Soon... </button>
                <div class="row professional_row" >
                    <div class="col-md-3">
                        <img src="/assets/images/imgs/mkll logo.png"  height="50">
                    </div>
                    <div class="col-md-3">
                        <img src="/assets/images/imgs/nba 2k20.png" width="200" height="50">
                    </div>
                    <div class="col-md-3"> 
                        <img src="/assets/images/imgs/rainbow six.png" width="200" height="50">
                    </div>
                    <div class="col-md-3">
                        <img src="/assets/images/imgs/madden 20.png" width="200" height="50">
                    </div>
                </div>
            </div>
        </section>
        <section class="class-details">
            <div class="container">
                <div class="row">
                    <div class="col-md-12 last_section">
                    </div>
                </div>
            </div>
        </section>
        
    </div>
</template>

<script>
    import pfetch from "../pfetch/pfetch";
    export default {
        name: "FightForChange",
        data(){
            return{
                access_token:null,
                leagueId:85
            }
        },
        created() {
            this.loadToken();
        },
        methods:{
            async loadToken(){
                const url = 'api/token';
                const res = await pfetch(url);
                if(res.token){
                    this.access_token = res.token;
                }
            },
            joinLeague(){
                try{
                    if (!this.access_token) {
                        window.location.href = '/signin_with_doctorbattles';
                        return;
                    }
                    let postData = {
                        league_id: this.leagueId
                    };
                    const url = 'https://doctorbattles.com/api/v1/auto_join_league';
                    console.log(this.access_token);
                    $.ajax({
                        url: url,
                        method: 'POST',
                        dataType: 'json',
                        data: postData,
                        headers: {
                            'Authorization': 'Bearer ' + this.access_token,
                        },
                        success: function(res) {
                            if(res.status != 'OK') {
                                if(res.response_txt){
                                    alert(res.response_txt);
                                }else{
                                    console.log(res);
                                }
                            }else if(res.response_txt != ''){
                                alert(res.response_txt)
                            }
                        },
                        error: function(e) {
                            console.log(e);
                            if(e.status === 401){
                                window.location.href = '/signin_with_doctorbattles';
                            }
                        }
                    });
                }catch (e) {
                    console.log(e);
                }
            },
            createAutoTeam(postData, callback) {
                let data = {
                    team_name: postData.team_name,
                    platform_id: 0,
                    game_id: 0,
                    region_id: 0,
                    video_link: "",
                    bio_content: "",
                    file_name: null,
                    banner_image: null,
                    group_id: 0,
                    proceed: 1,
                    league_id: postData.league_id
                };

                $.ajax({
                    url: 'https://doctorbattles.com/api/v1/team_mg/child/join_auto_team',
                    method: 'POST',
                    dataType: 'JSON',
                    data: data,
                    headers: {
                        'Authorization': 'Bearer ' + access_token
                    },
                    success: function(res) {
                        if(res.status == 'OK') {
                            callback();
                        }
                    },
                    error: function() {}
                })
            }
        }
    }
</script>

<style scoped lang="scss">
    @import '../../../sass/theme/css/classes.css';
    .professional_btn{
        color: white;
        background: #5E8208;
        padding: 15px 30px;
        border-radius: 30px;
        border: none;
        margin: 15px 0;
    }
    .professional_row{
        padding: 30px 0;
    }
    .professional_row .col-md-3{
        text-align: center;
        height: 50px;
    }
</style>
